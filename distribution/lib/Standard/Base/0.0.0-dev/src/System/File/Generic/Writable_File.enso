import project.Any.Any
import project.Data.Text.Text
import project.Data.Vector.Vector
import project.Nothing.Nothing
import project.System.Input_Stream.Input_Stream
import project.System.File.Generic.File_Write_Strategy.File_Write_Strategy
import project.System.File.File
import project.System.File.File_Access.File_Access
from project.Data.Boolean import Boolean, False, True

## PRIVATE
   Any type that represents a file that can be written to should be convertible
   to this common type-class.

   This allows our code to work with any kind of file backend, e.g. the local
   file system as well as remote ones like S3, using the same basic interface.

   The type-class currently provides the following capabilities:
   - write_strategy: a `File_Write_Strategy` instance denoting how to handle
     file writing depending on `Existing_File_Behavior` and dry run settings.
   - exists: the underlying `file` should have an `exists` method available,
     because it is used by some logic as an early exit condition.
type Writable_File
    ## PRIVATE
    Value file (write_strategy : File_Write_Strategy)

    ## PRIVATE
    exists self -> Boolean = self.file.exists

## PRIVATE
Writable_File.from (that : Text) =
    ## Currently this only works for local filesystem paths
       TODO We should extend it to also support custom paths like S3, through a ServiceProvider solution
    Writable_File.from (File.new that)
